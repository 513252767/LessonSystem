<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>选修选课</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>

    <style>body {
        padding-top: 60px;
    }</style>

    <link href="../css/bootstrap.css" rel="stylesheet"/>

    <script src="../js/jquery-3.5.1.min.js" type="text/javascript"></script>
    <script src="../js/bootstrap.js" type="text/javascript"></script>
    <script src="../js/login-register.js" type="text/javascript"></script>

    <script>

        $(function () {
            $.ajax("/BaseServlet?method=queryOptionalCourse", function (courses) {
                if (courses.length !== 0) {
                    var i = 1;
                    for (let coursesKey in courses) {
                        $('courseTable').append(" <tr height={40px} align=center id={lesson+i}>" +
                            "        <td>" + coursesKey.id + "</td>\n" +
                            "        <td>" + coursesKey.week + "</td>\n" +
                            "        <td>" + coursesKey.turn + "</td>\n" +
                            "        <td>" + coursesKey.name + "</td>\n" +
                            "        <td>" + coursesKey.teacher + "</td>\n" +
                            "        <td>" + coursesKey.classroom + "</td>\n" +
                            "        <td><button id={coursesKey.id} onclick={addCourse(this)} >选课</button></td>" +
                            "    </tr>");
                        i++;
                    }
                }
            })
        })

        function addCourse(btn) {
            var b = confirm("你确认选择吗?");
            if (b === true) {
                var id = btn.attr("id");
                $.ajax("/BaseServlet?method=addOptionalCourse", {lessonId: id}, function (result) {
                    alert(result);
                })

            }
        }
    </script>
</head>
<body>
<table id="courseTable" border=6 frame=void align=center width=650px height=100px cellspacing=0px cellpadding=10px>
    <tr height=50px align=center>
        <th><font color=gray>课程id</font></th>
        <th><font color=gray>星期</font></th>
        <th><font color=gray>节数</font></th>
        <th><font color=gray>课程名称</font></th>
        <th><font color=gray>教师</font></th>
        <th><font color=gray>教室</font></th>
        <th><font color=gray>   </font></th>
    </tr>
</table>
</body>
</html>